<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DFF</title>
    <style>*,*:before,*:after{box-sizing:border-box}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;color:#333}nav a:where(.active){background:#333;color:#fff}img{display:block;max-width:100%}code{font-weight:600}pre{background:#444;color:#fff;padding:1ch}pre code{background-color:inherit}table{border-collapse:collapse}table :where(th,td){border:1px solid #666}:where(h2,h3,h4) a{color:inherit;text-decoration:none}:where(h2,h3,h4) a:hover{text-decoration:underline}:where(h2,h3,h4) a:hover:after{content:" #"}.c-app-layout{display:grid;margin:0 auto;grid-template-columns:auto 1fr;gap:32px}.c-app-menu{top:0;position:sticky;overflow-y:scroll;padding:0 32px;background-color:#eee;height:100vh}
</style>
  </head>
  <body class="c-app-layout">
    <aside class="c-app-menu">
      <nav class="u-reset"><ul>
<li><a href="../index.html">Home</a></li>
<li>Chapter 0 - Temporary Examples
<ul>
<li><a href="../ch00/01-basic-syntax.html">Basic syntax</a></li>
<li><a href="../ch00/02-footnote.html">Footnote</a></li>
<li><a href="../ch00/03-table.html">Table</a></li>
<li><a href="../ch00/04-math-expression.html">Math expression</a></li>
</ul>
</li>
<li>Chapter 1 - Introduction
<ul>
<li><a href="01-overview.html">Overview</a></li>
<li><a href="02-feature-list.html">Feature List</a></li>
<li><a href="03-typical-use-cases.html">Typical Use Cases</a></li>
<li><a href="04-getting-started.html">Getting Started</a></li>
</ul>
</li>
<li>Chapter 2 - Tutorials
<ul>
<li>Essential Functionality
<ul>
<li><a href="../ch02/01-building-molecule.html">Building a Model of Molecule</a></li>
<li><a href="../ch02/02-working-with-liquid-model.html">Working with a liquid model</a></li>
</ul>
</li>
</ul>
</li>
</ul></nav>
    </aside>
    <main id="main"><article><h2 id="typical-use-cases"><a href="#typical-use-cases">Typical Use Cases</a></h2>
<h3 id="using-force-fields"><a href="#using-force-fields">Using force fields</a></h3>
<p>TEAMFF is a collection of developed force fields covering organic molecules, polymers, solid materials, transition metal complexes and drug-like molecules. Among the force fields, two families of force fields in <em>TEAM</em> and <em>AMBER</em> force field functionals are continually updated based on user feedbacks and advances in simulation technology.</p>
<p>TEAMFF can be used in a way like traditional force fields. However, the most important advantage of TEAMFF is that multiple force fields in the same force field functional can be mixed, which greatly enhances the coverage while maintaining high accuracy of the force field. A general procedure of using TEAMFF force fields is as follows:</p>
<ol>
<li>Build or import a molecular model. It is straightforward to create simple models such as an isolated molecule or a box representing a molecular liquid using functions provided by DFF. More complicated systems can be imported in several popular file formats. When the molecular models are imported or created, DFF automatically checks or rebuilds molecular topologies to prepare for atom type and parameter assignments.</li>
<li>Select a force field functional to be used. A force field functional is a collection of functional forms. DFF supports several force field functionals such as TEAM, <a href="https://ambermd.org/">AMBER</a>, <a href="https://www.charmm.org/">CHARMM</a>, <a href="https://charmm-gui.org/charmmdoc/cff.html">CFF</a>, DREIDIN, etc. The selection of force field functional is mainly determined by applications and simulation engines. TEAMFF force fields have been mostly developed for <em>TEAM</em> and <em>AMBER</em> force field functionals.</li>
<li>Select one or more force fields to be used in the selected force field functional. If multiple force fields are used, they are either used in the order specified or assigned to different subsets. For a model that contains multiple molecules, the parameters for different molecules may be taken from different force fields and the interactions between different molecules are described by the nonbond parameters only. Using subsets to assign force fields is more flexible and precise, but requires a pre-definition of the subsets. By default, the force fields are used in the order selected, a force field must contain all parameters for a molecule; otherwise, the molecule is passed to next force field. A typical guidance is to set the order by generality, where the most specific and accurate force field is called first, and the most generic one is called last.</li>
<li>If all required parameters are found, the model is assigned atom types and charges and saved as a molecular structural data (.msd) file. In addition, a force field file (.ppf) that contains all required parameters with correct atom types is generated. These two files must be used together. There is an option to combine these two files into one (.spf).</li>
<li>If some parameters are missing, the option is to transfer parameters or make automatic parameters together with the parameters obtained from the database. A more rigorous solution is to develop new parameters (see below).</li>
</ol>
<h3 id="making-force-fields"><a href="#making-force-fields">Making force fields</a></h3>
<p>New force fields can be made from scratch or based on the existing parameters. Either way, the new force field can be used alone with existing force fields in the same force field functional. A general procedure of making a new force field is as follows:</p>
<ol>
<li>Select a force field functional and a typing rule. Because each force field is independent, the typing rule can be defined independently. The selection of typing rule depends on the complexity of the parameterization scope. A general guidance is to keep the typing rules as simple as possible. Very flexible typing rules can be made by writing scripts. The recommended set of typing rules is the programmed _Default_typing rules.</li>
<li>Once the force field functional and the typing rule are set, a new force field table can be created. The new table can be added to TEAMFF database, or a newly created database. In most cases, adding a new table to TEAMFF is the choice, because the new force field can be used together with other force fields in the database.</li>
<li>Select molecule(s) to be parameterized. Initialize a new force field (.<em>ppf</em>) file using the same typing rule as that used in creating the force field, otherwise the new force field cannot be checked in. Using the empty force field, you can use the fragmentation tool to make fragment molecules which are suitable for parametrization.</li>
<li>Run Gaussian calculations for the training set to prepare quantum mechanics data (QMD) files. For each molecule, not only the global minimum energy but also the potential energy surface in conformation space should be sampled. DFF provides several tools to help this task. Each molecule is saved in one <em>QMD</em> file.</li>
<li>Unless you have too many molecules in the training set, you should fit all <em>QMD</em> files together to count for correlations. If you have molecules more than the capacity of DFF can take, divide the training set to several subsets and make sure the order of parameterization staring from the common functional groups so that the parameters obtained can be transferred to more complex subsets.</li>
<li>Fit the <em>QMD</em> files to obtain atomic partial charges and valence parameters in the ppf file. At this stage, Lennard-Jones (L-J) parameters suggested by DFF should be fixed. Validate the fit results and make sure the fit is successful. The default L-J parameters are taken from previous work, which are reasonable but may not be optimal for your system. If you have experimental data of liquid density and heat of vaporization, you may optimize the nonbond parameters which include L-J and charge parameters. As the charge parameters are derived from <em>QMD</em> of isolated molecules, which may not be suitable for (high polarizable) molecules in condense phases. If any nonbond parameters are changed, the fit of valence parameters need to repeat because of the coupling between nonbond and torsional parameters.</li>
<li>When the parameterization is completed, check in the <em>ppf</em> file to the force field table you have created. This force field now can be used either alone or together with other force fields in the same force field functional.</li>
</ol>
<p>If you only need to optimize a few parameters in an existing force file, the option is to check out relevant parameters to a <em>ppf</em> file from TEAMFF, work on the <em>ppf</em> file until all parameters are satisfactory, and then make a new table to check in the <em>ppf</em> file.</p></article></main>
    <script type="module">"use strict";console.log("ui ready");[...document.querySelectorAll("nav a")].find(a=>a.pathname===location.pathname)?.classList.add("active");
</script>
  </body>
</html>
