<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DFF</title>
    <style>*,*:before,*:after{box-sizing:border-box}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;color:#333}nav a:where(.active){background:#333;color:#fff}img{display:block;max-width:100%}code{font-weight:600}pre{background:#444;color:#fff;padding:1ch}pre code{background-color:inherit}table{border-collapse:collapse}table :where(th,td){border:1px solid #666}:where(h2,h3,h4) a{color:inherit;text-decoration:none}:where(h2,h3,h4) a:hover{text-decoration:underline}:where(h2,h3,h4) a:hover:after{content:" #"}.c-app-layout{display:grid;margin:0 auto;grid-template-columns:auto 1fr;gap:32px}.c-app-menu{top:0;position:sticky;overflow-y:scroll;padding:0 32px;background-color:#eee;height:100vh}
</style>
  </head>
  <body class="c-app-layout">
    <aside class="c-app-menu">
      <nav class="u-reset"><p>I. Introduction</p>
<ul>
<li><a href="../index.html">Overview</a></li>
<li><a href="../features.html">Feature List</a></li>
<li><a href="../usecases.html">Typical Use Cases</a></li>
</ul>
<p>II. How To</p>
<ul>
<li><a href="../HowTo/Install.html">Download and installation</a></li>
<li><a href="../HowTo/License.html">Get license</a></li>
<li><a href="../HowTo/Navigate.html">Navigate DFF</a></li>
<li><a href="../HowTo/BuildModel.html">Build a model</a></li>
<li>Import models</li>
<li>Assign TEAMFF</li>
<li>Export models</li>
<li>Build a training set</li>
<li>Get quantum mechanics data</li>
<li>Fit quantum mechanics data</li>
<li>Fit Liquid data</li>
<li>Test force fields</li>
<li>Export to simulation software</li>
<li>Expand TEAMFF</li>
<li>Check out parameters from TEAMFF</li>
<li>Make new force field in TEAMFF</li>
<li>Make specific force field</li>
<li>Use Parametrization Workflow</li>
</ul>
<p>III. Tutorials</p>
<ul>
<li>[Overview] (./offline/tutorials.md)</li>
<li><a href="tutorials-project/lecture.html">Project and Models</a></li>
<li><a href="tutorials-liquid.html">Use TEAMFF for Liquids</a></li>
<li><a href="tutorials-polymer.html">Use TEAMFF for Macromolecules</a></li>
<li><a href="tutorials-mixforcefields.html">Use Multiple Force Fields of TEAMFF</a></li>
<li><a href="tutorialsB-qmdata.html">Prepare QM Data for Parameterization</a></li>
<li><a href="tutorialsB-fitmolecule.html">Fit QM Data of Molecules</a></li>
<li><a href="tutorialsB-fitliquid.html">Optimize LJ parameters</a></li>
<li><a href="tutorials-addteamff.html">Extend TEAMFF by Adding New Force Fields</a></li>
<li><a href="tutorials-useqmdff.html">Use QMDFF for Specific Force Fields</a></li>
</ul>
<p>IV References of Commands</p>
<ul>
<li><a href="../WinCommands/ProjectNav.html">Project Navigator</a></li>
<li><a href="../WinCommands/Toolbar.html">Toolbar</a></li>
<li><a href="../WinCommands/Mouse.html">Mouse Functions</a></li>
<li><a href="../WinCommands/File.html">File Menu</a></li>
<li><a href="../WinCommands/Edit.html">Edit Menu</a></li>
<li><a href="../WinCommands/Build.html">Build Menu</a></li>
<li><a href="../WinCommands/View.html">View Menu</a></li>
<li><a href="../WinCommands/TEAMFF.html">TEAMFF Menu</a></li>
<li><a href="../WinCommands/Simulation.html">Simulation Menu</a></li>
<li><a href="../WinCommands/QMDFF.html">QMDFF Menu</a></li>
<li><a href="../WinCommands/Forcefield.html">ForceField Menu</a></li>
<li><a href="../WinCommands/Parameter.html">Parameter Menu</a></li>
<li><a href="../WinCommands/QMD.html">QMD Menu</a></li>
<li><a href="../WinCommands/Help.html">Help Menu</a></li>
</ul>
<p>V. References of Executable Commands</p>
<ul>
<li><a href="../exe-commands/model-com.html">Model Commands</a></li>
<li><a href="../exe-commands/forcefield-com.html">ForceField Commands</a></li>
<li><a href="../exe-commands/export-com.html">Export Commands</a></li>
<li><a href="../exe-commands/database-com.html">TEAMFF Commands</a></li>
<li><a href="../exe-commands/fit-com.html">Fit Commands</a></li>
<li><a href="../exe-commands/mm-com.html">Molecular Mechanics Commands</a></li>
<li><a href="../exe-commands/qm-com.html">Quantum Mechanics Commands</a></li>
<li><a href="../exe-commands/qmdff-com.html">QMDFF commands</a></li>
</ul>
<p>IV. Concepts, Methods and Algorithms</p>
<ul>
<li>
<p><a href="../topics/introduction.html">Introduction</a></p>
</li>
<li>
<p><a href="../topics/forcefield-types.html">Force Field Types</a></p>
<ul>
<li><a href="../topics/forcefield-types.html">AMBER Type</a></li>
<li><a href="../topics/forcefield-types.html">TEAM Type</a></li>
</ul>
</li>
<li>
<p><a href="../topics/atom-types.html">Atom Types</a></p>
<ul>
<li><a href="../topics/atom-types-properties.html">Molecular and Atomic Properties</a></li>
<li><a href="../topics/atom-types-typingrules.html">Typing Rules</a></li>
<li><a href="../topics/atom-types-extensible.html">Extensible Definitions</a></li>
<li><a href="../topics/atom-types-hypervalence.html">Hyper-valence</a></li>
<li><a href="../topics/atom-types-equivalence.html">Equivalent Types</a></li>
<li><a href="../topics/atom-types-integrated.html">Integrated Types</a></li>
</ul>
</li>
<li>
<p><a href="../topics/parametrization.html">Parametrization</a></p>
<ul>
<li><a href="../topics/parametrization-trainingset.html">Training Set</a></li>
<li><a href="../topics/parametrization-general.html">General Procedure</a></li>
<li><a href="../topics/parametrization-autoPar.html">Automatic Parameters</a></li>
<li><a href="../topics/parametrization-qmd.html">Quantum Mechanics Data </a></li>
<li><a href="../topics/parametrization-fitqmd.html">Fit Quantum Mechanics Data </a></li>
<li><a href="../topics/parametrization-fitdimer.html">Fit Molecular Dimer</a></li>
<li><a href="../topics/parametrization-fitliquid.html">Fit Liquid Data</a></li>
</ul>
</li>
<li>
<p><a href="../topics/teamff-database.html">TEAMFF Database</a></p>
<ul>
<li><a href="../topics/teamff-forcefields.html">Included Force Fields</a></li>
<li><a href="../topics/teamff-extensibility.html">Extensibility of TEAMFF</a></li>
</ul>
</li>
<li>
<p><a href="../topics/qmdff-database.html">QMDFF Database</a></p>
</li>
<li>
<p><a href="../topics/molecular-simulations.html">Molecular Simulations</a></p>
</li>
</ul>
<p>WebDFF</p>
<ul>
<li><a href="../online/registration.html">Registration</a></li>
<li><a href="../online/tutorial.html">Tutorial</a></li>
<li><a href="../online/support.html">Support</a></li>
</ul>
<p>Appendix</p>
<ul>
<li><a href="../appendix/functions.html">Force Field Functions</a></li>
<li><a href="../exe-commands/firl-formats.html">File Formats</a></li>
</ul>
<p>Temporary Examples</p>
<ul>
<li><a href="../ch00/01-basic-syntax.html">Basic syntax</a></li>
<li><a href="../ch00/02-footnote.html">Footnote</a></li>
<li><a href="../ch00/03-table.html">Table</a></li>
<li><a href="../ch00/04-math-expression.html">Math expression</a></li>
</ul></nav>
    </aside>
    <main id="main"><article><h2 id="build-a-liquid-model"><a href="#build-a-liquid-model">Build a Liquid Model</a></h2>
<p>DFF has functionality to build liquid models for the purposes of parameterization and validation of nonbond parameters. In this lesson we show how to build pure liquid model and liquid interface model, and use TEAMFF to prepare simulation jobs.</p>
<h3 id="build-a-liquid-model-1"><a href="#build-a-liquid-model-1">Build a Liquid Model</a></h3>
<ol>
<li>
<p>Start DFF. If the project is not fully loaded, right-click on the “Tutorials” node in Project Navigator, right-click mouse to select <strong>Refresh</strong> to update the list. The command <strong>Sort</strong> can be used to arrange the sub-folders.</p>
</li>
<li>
<p>In the “Tutorials” folder, there is a “tutorial2_liquid” subfolder. There are several molecular models: “water”, “phenol”, “octane”, and “SOS” (Sodium octyl sulfate), which can be used to build liquid models.</p>
</li>
<li>
<p>Let's make a mixture of water and phenol. Select water and phenol from the Project Navigator, and then open <strong>Build/Bulk Liquid</strong> command.  This brings up a dialog to build a liquid model. select “300” water molecules and “100” phenol molecules, set density to be “0.8”, and click Execute.</p>
</li>
</ol>
<p><em>DFF will now build a box with low density and then compress the box to the target density. The compression is a series of quick NPT simulation without sufficient relaxation. For bulky molecules, this could cause a very high energy configuration in the end. To avoid such problem, try to make an initial configuration with low density and gradually compress the box by using normal NPT MD simulations with high pressure.</em></p>
<ol start="3">
<li>
<p>Select the newly built model, Click <strong>TEAMFF/Admin</strong> to make sure the database “TEAMFF.dffdb” is selected, set "Force Field Type" to “TEAM”, and select “TEAM-General” force field from the list. Click <strong>OK</strong> to close the dialog.</p>
</li>
<li>
<p>Select <strong>TEAMFF/Assign</strong> command to open a dialog. Rename the "Output" force field to “team.ppf”. The liquid model is listed under “Available Models”. Click <strong>OK</strong> to assign force field parameters for the model.</p>
</li>
<li>
<p>When the job is complete, a force field table appears on the screen. Examine the parameters and close the force field table. Note that the models is associated with the newly obtained force field “team.ppf”, which can be verified by clicking on the model in the Project Navigator to open the Force Field Editor.</p>
</li>
<li>
<p>The model is now ready for simulation. Open <strong>Simulation/Molecular Dynamics</strong> command. The options for nonbond computation can be selected by using the <strong>Nonbond Energy</strong> button. The group-based cutoff is recommended. If the energy of initial configuration is too high, MD simulation will stop and return an error message. Reduce the time step to smaller value (such as 0.1 - 0.001 fs) can quickly reduce the tensions in the system, then continue the simulation with normal time step.</p>
</li>
</ol>
<h3 id="liquid-vapor-interface"><a href="#liquid-vapor-interface">Liquid-vapor Interface</a></h3>
<ol>
<li>
<p>Open the <strong>Bilayer Interface</strong> command dialog. Enter a “Job Name” if desired, and then make sure the box dimensions in X and Y are acceptable, make the values larger or smaller will change the box sizes.</p>
</li>
<li>
<p>The “Phase A” is the central part of the model to be built, which has two surfaces. We will treat it as water bulk. Select “water” from the pulldown, enter “1.0” as the “Density”, and “500” as the “Count” of molecules. Note the count will change the Z-length, make sure the value is reasonable.</p>
</li>
<li>
<p>The “Phase B” defines the two phases above and below the central part. Let’s treat it as water vapor. Set “Density” to be “0.1”, “Count” to be “50”, so that the Z-length is like that of the bulk liquid.</p>
</li>
<li>
<p>Do not select anything for the “Interface”, and then click OK button to start the builder job.</p>
</li>
<li>
<p>When the job is finished, a bilayer model is built. Turn it around you can see the model looks like this:</p>
</li>
</ol>
<p><img src="image.png" alt="liquid-vapor"></p>
<ol start="6">
<li>Use <strong>Simulation/Molecular Dynamics</strong> to relax the system, and then use <strong>Simulation/LAMMPS</strong> to submit a simulation job.</li>
</ol>
<p>The vapor-liquid interface model can be used to calculate vapor-liquid equilibrium directly by using MD simulations. It is generally an expensive simulation because of slow convergence, especially at low temperatures when the number of molecules in the vapor phase is low.</p>
<p>BUILDING LIQUID-SURFACTANT-LIQUID INTERFACE
DFF can be used to build liquid-liquid interfaces with or without the third molecule in the interface. We will use water, octane, and SOS to build an interface with surfactant.</p>
<ol>
<li>
<p>Follow the same procedure as above, set “water” in Phase A, and “octant” in Phase B. The density of water is 1.0, the density of octant is 0.7. Control the “Count” so that the Z-lengths are reasonable.</p>
</li>
<li>
<p>Select “SOS” as the interface. Enter “25” as the number of molecules, which defines the surface concentration. The Dialog looks like this:</p>
</li>
<li>
<p>Click OK to launch a series of DFF background jobs. When the jobs are finished, a new model is loaded automatically. Rotate the model, it should look like:</p>
</li>
<li>
<p>Select a model in the Project Navigator and then select the Build → Charge Group command to set the charge groups.  Leave the default option unchanged, click Execute to assign charge groups. The central panel of the dialog shows the charge group properties. Repeat this operation for each of models listed in the Project Navigator. Water contains one charge group, phenol has 6, octane has 10, and surfactant has 8, among these groups two are charged species: sodium cation and SO4- anion.</p>
</li>
</ol></article></main>
    <script type="module">"use strict";console.log("ui ready");[...document.querySelectorAll("nav a")].find(a=>a.pathname===location.pathname)?.classList.add("active");
</script>
  </body>
</html>
